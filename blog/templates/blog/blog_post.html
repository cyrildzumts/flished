{% extends "base.html" %}
{% load i18n %} 
{% load static %}
{% load core_tags %}
{% load blog_tags %}

{% block HEADER_BANNER %}
<div class="actions">
    <a href="{% url 'blog:blog-home' %}" class="mat-button mat-button-text"><span>{{UI_STRINGS_CONTEXT.UI_BLOG_HOME_LABEL}}</span></a>
</div>
{% endblock HEADER_BANNER %}

{% block MAIN %}
<div class="container">
    <article class="post-wrapper">
        <div class="post-header">
            <span>{{blog_post.author.get_full_name}}</span>|<span>{{blog_post.created_at}}</span>|<span>{{blog_post.post_status|post_status_value}}</span>
        </div>
        <div class="post">
            <div class="post-title"><span>{{blog_post.title}}</span></div>
            <div class="post-sharing">
                <ul class="flex flex-left">
                    <li><a href="#"><i class="fab fa-facebook icon"></i></a></li>
                    <li><a href="#"><i class="fab fa-twitter icon"></i></a></li>
                    <li><a href="#"><i class="fab fa-whatsapp icon"></i></a></li>
                </ul>
            </div>
            {% render_post blog_post %}
            <div class="post-comments">
                
                <div id="comments-wrapper" class="comments-wrapper">
                    <div class="create-comment">
                        {% if not request.user.is_authenticated %}
                        <div class="hint">{% trans "Only members can comment" %}</div>
                        {% endif %}
                        <form action="{% url 'blog:create-comment' blog_post.slug %}"  class="form" method="POST">{% csrf_token %}
                            {% if request.user.is_authenticated %}
                            <input type="hidden" name="author" value="{{request.user.pk}}">
                            {% endif %}
                            <input type="hidden" name="post" value="{{blog_post.pk}}">
                            <textarea name="comment" id="new-comment" class="full" cols="30" rows="10" placeholder="{% trans 'Post a comment' %}"></textarea>
                            <div class="actions flex-right">
                                <button class="mat-button-default" {% if not request.user.is_authenticated %}disabled{% endif %}><span>{% trans "Comment" %}</span></button>
                            </div>
                        </form>
                    </div>
                    <div class="post-header">
                        <span>{% trans "Comments" %}</span>|<span><i class="fas fa-comments icon"></i>{{blog_post.comments.count}}</span>
                    </div>
                    <ul id="comments" class="comments box">
                        {% for comment in blog_post.comments.all %}
                        <li>
                            <div class="comment mat-box">
                                <div class="post-header">
                                    <span class="bold">{{comment.author.get_full_name}}</span>|<span><i class="fas fa-comment icon"></i> {{comment.created_at}}</span>|<span class="js-report-comment" title="{% trans 'Signal this comment' %}"><i class="far fa-flag icon"></i></span>
                                </div>
                                <div>
                                    <p>{{comment.comment}}</p>
                                </div>
                            </div>
                        </li>
                        {% empty %}
                        <li><span>{% trans "Be the first to comment" %}/span></li>
                        {% endfor %}
                        {% comment %}
                            <li>
                                <div class="comment mat-box">
                                    <div class="post-header">
                                        <span class="bold">Cyrille Ngassam Nkwenga</span>|<span><i class="fas fa-comment icon"></i> {{blog_post.created_at}}</span>|<span class="js-report-comment" title="{% trans 'Signal this comment' %}"><i class="far fa-flag icon"></i></span>
                                    </div>
                                    <div>
                                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est neque modi laborum ad inventore in minima nulla veniam velit debitis. Deleniti odio praesentium veritatis reiciendis fugiat explicabo molestiae dolor odit.</p>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="comment mat-box">
                                    <div class="post-header">
                                        <span class="bold">Cyrille Ngassam Nkwenga</span>|<span><i class="fas fa-comment icon"></i> {{blog_post.created_at}}</span>|<span class="js-report-comment" title="{% trans 'Signal this comment' %}"><i class="far fa-flag icon"></i></span>
                                    </div>
                                    <div>
                                        <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Est neque modi laborum ad inventore in minima nulla veniam velit debitis. Deleniti odio praesentium veritatis reiciendis fugiat explicabo molestiae dolor odit.</p>
                                    </div>
                                </div>
                            </li>
                        {% endcomment %}
                    </ul>
                </div>
            </div>
        </div>
    </article>
</div>
{% endblock MAIN %}
{% block FOOTER %}{% endblock FOOTER %}